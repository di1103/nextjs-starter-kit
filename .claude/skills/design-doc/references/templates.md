# 設計書テンプレート

設計書作成時に使用するテンプレート。

---

## 機能設計書 (`docs/design/features/[機能名].md`)

```markdown
# [機能名]

## 更新履歴

| 日付 | 変更内容 | 担当 |
|------|---------|------|
| YYYY-MM-DD | 初版作成 | Claude |

## 概要
[この機能の目的・背景]

## 要件
- [ ] 要件1
- [ ] 要件2
- [ ] 要件3

## 依存関係

### 前提機能（この機能が依存する）
| 機能 | 設計書 | 必要な理由 |
|------|--------|-----------|
| 認証 | [auth.md](./auth.md) | ログイン済みユーザーが前提 |

### 被依存機能（この機能に依存する）
| 機能 | 設計書 | 依存内容 |
|------|--------|---------|
| 注文 | [order.md](./order.md) | 商品情報を参照 |

## 画面・UI
[関連するUI設計書へのリンク、またはなし]

## データベース設計

### テーブル
| テーブル名 | 説明 |
|-----------|------|
| xxx | ... |

### スキーマ定義
```typescript
// lib/db/schemas/xxx.ts
export const xxx = pgTable("xxx", {
  // フィールド定義
});
```

## API / Server Actions

### [アクション名]
- **ファイル**: `lib/actions/xxx.ts`
- **引数**: `{ field1: string, field2: number }`
- **戻り値**: `{ success: boolean, data?: T }`
- **権限**: admin / user / public

## バリデーション
```typescript
// lib/validations/xxx.ts
export const xxxSchema = z.object({
  // スキーマ定義
});
```

## 実装チェックリスト
- [ ] DBスキーマ作成
- [ ] Server Actions作成
- [ ] バリデーション作成
- [ ] UI実装
- [ ] 動作確認

## テスト観点

### 選択した観点

| ID | 観点 | テスト種別 | 優先度 |
|----|------|-----------|--------|
| F-1-2 | フォーム送信 | Unit/E2E | 必須 |
| F-2-1 | 必須チェック | Unit | 必須 |
| S-2-1 | 未認証アクセス | Unit | 必須 |

### 正常系
- [ ] データが正しく保存されるか

### 異常系
- [ ] 必須項目が空の場合エラーになるか

## 備考
[実装時の注意点、既知の制約など]
```

---

## UI設計書 (`docs/design/ui/[画面名].md`)

### 粒度の判断基準

| 条件 | 粒度 |
|------|------|
| 独立したURL（ルート）を持つ | 個別の設計書 |
| モーダル・ドロワー | 親画面の設計書に含める |
| 複数画面で共有するコンポーネント | 別途コンポーネント設計書 |

```markdown
# [画面名]

## 更新履歴

| 日付 | 変更内容 | 担当 |
|------|---------|------|
| YYYY-MM-DD | 初版作成 | Claude |

## 概要
[この画面の目的]

## アクセス権限
- admin: ✅
- user: ✅ / ❌
- 未ログイン: ❌

## ワイヤーフレーム
```
┌─────────────────────────────────┐
│  ヘッダー                        │
├─────────────────────────────────┤
│                                 │
│  コンテンツエリア                 │
│                                 │
└─────────────────────────────────┘
```

## コンポーネント構成
- `app/[route]/components/Xxx.tsx` - メインコンポーネント
- `app/[route]/components/XxxItem.tsx` - 子コンポーネント

## 使用するUIコンポーネント（shadcn/ui）
- Button
- Card
- Dialog

## 状態管理
[useState / useReducer / 外部ライブラリ]

## データ取得
[Server Component / useEffect / Server Actions]

## 実装チェックリスト
- [ ] コンポーネント作成
- [ ] レスポンシブ対応
- [ ] ローディング状態
- [ ] エラー状態
- [ ] 動作確認

## テスト観点

| ID | 観点 | テスト種別 | 優先度 |
|----|------|-----------|--------|
| U-1-1 | タップターゲット | Unit/E2E | 必須 |
| U-2-1 | ローディング表示 | Unit | 必須 |
| U-3-1 | レスポンシブ | E2E | 必須 |
```
