---
name: design-doc
description: 顧客情報から設計書を作成するスキル。顧客情報の探索、設計方針の計画、設計書の生成を実行。「設計書を作成して」「機能の設計書を書いて」などの指示で起動。
---

# 設計書作成スキル

顧客情報から設計書を作成するスキルです。

---

## 実行フロー

```
Phase 0: 情報源確認
    → (あり) Phase 1: 顧客情報探索
    → (なし) Phase 0-B: 直接ヒアリング
    → Phase 2: 設計方針計画
    → Phase 3: 設計書生成
```

---

## Phase 0: 情報源の確認

```
docs/customer/ に顧客情報があるか確認
├── あり → Phase 1 へ
└── なし → Phase 0-B へ
```

### Phase 0-B: 直接ヒアリング

顧客情報がない場合、AskUserQuestionで確認:

| カテゴリ | 質問例 |
|---------|--------|
| 目的 | この機能で何を実現したいですか？ |
| ユーザー | 誰が使いますか？ |
| 操作 | どのような操作が必要ですか？ |
| データ | どのようなデータを扱いますか？ |

---

## Phase 1: 顧客情報の探索 (Explore)

```
Task(subagent_type="Explore")
├── docs/customer/requirements/ を探索
├── docs/customer/meeting-notes/ を探索
└── 関連する要件・決定事項を抽出
```

**探索のポイント**:
- 機能名・画面名で直接検索
- 業務用語（「注文」「在庫」等）で検索
- 制約条件を抽出

---

## Phase 2: 設計方針の計画 (Plan)

```
Task(subagent_type="Plan")
├── 機能の分割方針を決定
├── 依存関係を整理
├── 実装ファイル構成を計画
└── 設計書の構成を決定
```

---

## Phase 3: 設計書の生成

1. `docs/design/index.md` を更新
2. `docs/design/features/[機能名].md` を作成
3. `docs/design/ui/[画面名].md` を作成（必要な場合）

テンプレート → [references/templates.md](references/templates.md)

---

## 設計完了時のチェック

```
├── [ ] docs/design/index.md に追加済み
├── [ ] テスト観点が選択済み
├── [ ] 依存関係が明記済み
└── [ ] 実装チェックリストが記載済み
```

---

## 実装への引き継ぎ

設計書完了後、ユーザーに案内:

```
設計書が完成しました。

📄 作成した設計書:
- docs/design/features/xxx.md
- docs/design/ui/xxx.md

実装を開始するには:
「xxx を実装して」と指示してください。
```

---

## 注意点

### Claude Code用の最適化
1. **1ファイル = 1機能**: 機能ごとに分割
2. **具体的なファイルパス**: 実装先を明記
3. **型定義を含める**: TypeScriptスキーマを記載
4. **チェックリスト形式**: 実装完了を追跡可能に

### 依存関係の明示
- 他機能への依存
- 既存コードとの関係
- 実装順序の推奨
