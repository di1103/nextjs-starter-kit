# 3段階評価方式

設計書の内容が正しく実装に反映されているかを3段階で評価する。

---

## 評価レベル

```
Level 1: 設計書の項目レベル
    ↓
Level 2: 設計書ファイルレベル
    ↓
Level 3: 設計書全体レベル
```

---

## Level 1: 設計書の項目レベル

各ステップ（DB、バリデーション、Actions、UI）の実装後に評価。

| セクション | 評価観点 |
|-----------|---------|
| DB設計 | テーブル名、カラム名、型、制約が設計通りか |
| バリデーション | 必須、最大長、範囲等の制約が設計通りか |
| Server Actions | 関数名、引数、戻り値、権限が設計通りか |
| UI | コンポーネント名、使用部品、状態管理が設計通りか |

**差分あり**: 設計書を正として実装を自動修正

---

## Level 2: 設計書ファイルレベル

1つの設計書の全項目実装後に評価。

| 評価観点 | 確認内容 |
|---------|---------|
| 機能の実現 | 設計書の「概要」に記載された目的が達成されているか |
| 要件の充足 | 設計書の「要件」チェックリストが全て実装されているか |
| データフロー | DB → Actions → UI のデータの流れが正しいか |
| エラーハンドリング | 設計書の「異常系」が適切に処理されているか |

**差分あり**: 設計書を正として不足箇所を追加実装

---

## Level 3: 設計書全体レベル

全設計書の実装完了後に評価。

| 評価観点 | 確認内容 |
|---------|---------|
| 機能間連携 | 複数機能をまたぐ処理が正しく動作するか |
| 認証・認可 | 権限設計が全体で一貫しているか |
| UI/UX | 画面遷移、操作フローが設計意図通りか |
| 要件カバー率 | traceability-matrix.md の全要件が実装されているか |

**差分あり**: 該当する設計書に戻り、Level 1から再評価

---

## 評価フロー

```
設計書1つの実装
        │
        ▼
┌───────────────┐
│ Level 1 評価   │ ← 各項目ごと
└───────┬───────┘
        │ 全項目OK
        ▼
┌───────────────┐
│ Level 2 評価   │ ← 設計書ファイル全体
└───────┬───────┘
        │ OK
        ▼
    次の設計書へ
        │
        ▼
    全設計書完了
        │
        ▼
┌───────────────┐
│ Level 3 評価   │ ← 設計書全体
└───────┬───────┘
        │ OK
        ▼
    実装フェーズ完了
```
