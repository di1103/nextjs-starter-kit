# エラー時の対処

実装中に発生するエラーの対処方法。

---

## 自動修正可能なエラー

| エラー種別 | 内容 | 対処 |
|-----------|------|------|
| ビルドエラー | TypeScript型エラー、import不足 | エラーメッセージを読み、設計書を参照して自動修正 |
| 実行時エラー | Server Actions失敗、認証エラー | ログを確認し、設計書を参照して自動修正 |
| 依存エラー | 他の設計書の実装が先に必要 | 依存先を先に実装してから再開 |

---

## 中断が必要なエラー

以下のエラーは進捗に記録し、中断してユーザーに報告する。

| エラー種別 | 内容 | 対処 |
|-----------|------|------|
| DBエラー | マイグレーション失敗、制約違反 | 進捗に記録 → 中断 → ユーザーに報告 |
| 設計書不備 | 情報不足で実装できない | 進捗に記録 → 中断 → ユーザーに報告 |

---

## 中断時の進捗記録

`docs/progress/cycle-status.md` に以下を記録:

```markdown
## ブロッカー

| 発生日時 | 設計書 | エラー種別 | 内容 | 状態 |
|---------|--------|-----------|------|------|
| 2024-01-20 10:30 | DOC-FUN-002 | DBエラー | 外部キー制約違反 | 未解決 |
```

---

## 中断時の報告フォーマット

```markdown
## 実装中断レポート

### エラー内容
- 設計書: DOC-FUN-002 (features/product.md)
- エラー種別: DBエラー
- 詳細: 外部キー制約違反 - users テーブルが存在しない

### 必要な対応
1. users テーブルを先に作成
2. pnpm db:push を実行
3. 「実装を再開して」で続行

### 現在の進捗
- 完了: DOC-FUN-001
- 中断: DOC-FUN-002 (Step 1: DBスキーマ)
- 未着手: DOC-UI-001, DOC-UI-002
```
